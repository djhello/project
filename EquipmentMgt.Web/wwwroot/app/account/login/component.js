"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var i,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;0<=n;n--)(i=e[n])&&(s=(a<3?i(s):3<a?i(t,r,s):i(t,r))||s);return 3<a&&s&&Object.defineProperty(t,r,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),forms_1=require("@angular/forms"),router_1=require("@angular/router"),platform_browser_1=require("@angular/platform-browser"),service_1=require("../../shared/service"),LoginComponent=function(){function e(e,t,r,o){this.router=e,this.titleService=t,this.formBuilder=r,this._dataService=o,this.loading=!1,this._saveUrl="/api/auth/loginusers",localStorage.getItem("isLoggedin")&&this.router.navigate(["/backoffice"])}return e.prototype.ngOnInit=function(){this.titleService.setTitle("Envanter Takip Sistemi | Login"),this.createForm()},e.prototype.createForm=function(){this.userForm=this.formBuilder.group({userName:new forms_1.FormControl("",forms_1.Validators.required),userPass:new forms_1.FormControl("",forms_1.Validators.required)}),$("#userName").focus()},e.prototype.onSubmit=function(){var t=this;this.userForm.invalid||(this.loading=!0,this._dataService.save(this.userForm.value,this._saveUrl).subscribe(function(e){t.loading=!1;e=e.loggeduser;null!=e?(localStorage.setItem("isLoggedin","true"),localStorage.setItem("loggedUser",JSON.stringify(e)),t.router.navigate(["/backoffice"])):(t.resmessage="Login Faild",t.alertmessage="alert-outline-danger")},function(e){}))},e.prototype.reset=function(){this.userForm.setValue({userName:null,userPass:null}),this.resmessage=null},__decorate([core_1.Component({selector:"app-login",templateUrl:"./app/account/login/component.html",providers:[service_1.DataService]}),__metadata("design:paramtypes",[router_1.Router,platform_browser_1.Title,forms_1.FormBuilder,service_1.DataService])],e)}();exports.LoginComponent=LoginComponent;
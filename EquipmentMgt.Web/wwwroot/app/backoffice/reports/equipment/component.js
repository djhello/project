"use strict";var __decorate=this&&this.__decorate||function(e,t,r,i){var a,o=arguments.length,n=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;0<=l;l--)(a=e[l])&&(n=(o<3?a(n):3<o?a(t,r,n):a(t,r))||n);return 3<o&&n&&Object.defineProperty(t,r,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),router_1=require("@angular/router"),platform_browser_1=require("@angular/platform-browser"),angular_highcharts_1=require("angular-highcharts"),service_1=require("../../../shared/service"),tableUtil_1=require("../../../shared/tableUtil"),EquipmentReportsComponent=function(){function e(e,t,r){this.router=e,this.titleService=t,this._dataService=r,this.equipmentreturned=[],this.equipmentissued=[],this.loading=!1,this._getUrl="/api/report/getEquipmentChart",this._getRUrl="/api/circulation/getreturnall",this._getIUrl="/api/circulation/getIssueAll"}return e.prototype.ngOnInit=function(){this.titleService.setTitle("Envanter Takip Sistemi | Rapor"),this.getChart(),this.returnedList()},e.prototype.getChart=function(){var i=this;this.loading=!0,this._dataService.getAll(this._getUrl).subscribe(function(e){i.echart=e;for(var t=[],r=0;r<i.echart.length;r++)t.push({name:i.echart[r].ename,y:i.echart[r].nissue,sliced:!0,selected:!0});i.chart=new angular_highcharts_1.Chart({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",backgroundColor:null,options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Equipment Issued"},subtitle:{text:"Issued Pie-Chart!"},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{name:"Total Issued",data:t}]})},function(e){}),this.loading=!1},e.prototype.returnedList=function(){var t=this;this.loading=!0,this._dataService.getAll(this._getRUrl).subscribe(function(e){console.log(e),t.equipmentreturned=e},function(e){}),this._dataService.getAll(this._getIUrl).subscribe(function(e){console.log(e),t.equipmentissued=e,t.loading=!1},function(e){})},e.prototype.exportReturnedTable=function(){tableUtil_1.TableUtil.exportArrayToExcel(this.equipmentreturned,"ExampleArray")},e.prototype.exportIssuedTable=function(){tableUtil_1.TableUtil.exportArrayToExcel(this.equipmentissued,"ExampleArray")},__decorate([core_1.Component({selector:"chart",templateUrl:"./app/backoffice/reports/equipment/component.html",providers:[service_1.DataService]}),__metadata("design:paramtypes",[router_1.Router,platform_browser_1.Title,service_1.DataService])],e)}();exports.EquipmentReportsComponent=EquipmentReportsComponent;
"use strict";var __decorate=this&&this.__decorate||function(e,t,a,r){var o,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,r);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(i=(n<3?o(i):3<n?o(t,a,i):o(t,a))||i);return 3<n&&i&&Object.defineProperty(t,a,i),i},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),forms_1=require("@angular/forms"),router_1=require("@angular/router"),platform_browser_1=require("@angular/platform-browser"),service_1=require("../../../shared/service"),DepartmansComponent=function(){function e(e,t,a,r){this.router=e,this.titleService=t,this.formBuilder=a,this._dataService=r,this.booleanValue=!1,this.loading=!1,this._getUrl="/api/departman/getAll",this._getbyIdUrl="/api/departman/getById",this._saveUrl="/api/departman/save",this._deleteUrl="/api/departman/deleteById",this._updateUrl="/api/departman/updateStatus",this.loggedUser=JSON.parse(localStorage.getItem("loggedUser"))}return e.prototype.ngOnInit=function(){this.titleService.setTitle("Envanter Takip Sistemi | Bölümler"),this.createForm(),this.getAll()},e.prototype.createForm=function(){this.departmanForm=this.formBuilder.group({departmanId:0,departmanName:new forms_1.FormControl("",forms_1.Validators.required)}),$("#departmanName").focus()},e.prototype.addNew=function(){$("#defaultsizemodal").modal("show"),$("#defaultsizemodal").on("shown.bs.modal",function(){$(this).find("#departmanName").focus()}),this.reset()},e.prototype.getAll=function(){var t=this;this.loading=!0,this._dataService.getAll(this._getUrl).subscribe(function(e){t.loading=!1,t.departmans=e},function(e){console.log(e)})},e.prototype.edit=function(e,t){var a=this;this.loading=!0,e.preventDefault(),this._dataService.getById(t.departmanId,this._getbyIdUrl).subscribe(function(e){a.loading=!1,a.departman=e,a.departmanForm.setValue({departmanId:a.departman.departmanId,departmanName:a.departman.departmanName}),$("#defaultsizemodal").modal("show"),$("#defaultsizemodal").on("shown.bs.modal",function(){$(this).find("#departmanName").focus()})},function(e){})},e.prototype.onSubmit=function(){var t=this;this.loading=!0,this.departmanForm.invalid||this._dataService.saveWithUser(this.departmanForm.value,this.loggedUser,this._saveUrl).subscribe(function(e){t.resmessage=e.message,t.alertmessage="alert-outline-info",t.getAll(),t.reset(),t.loading=!1,$("#defaultsizemodal").modal("hide")},function(e){})},e.prototype.updateStatus=function(e,t){var a=this;console.log(t),this.loading=!0,e.preventDefault(),confirm("You are about to delete "+t.departmanName+". Are you sure?")&&this._dataService.updateStatus(t,this.loggedUser,this._updateUrl).subscribe(function(e){a.resmessage=e.message,a.alertmessage="alert-outline-info",a.getAll(),a.reset(),a.loading=!1,$("#defaultsizemodal").modal("hide")},function(e){console.log(e),a.loading=!1}),this.loading=!1},e.prototype.delete=function(e,t){var a=this;this.loading=!0,e.preventDefault(),confirm("You are about to delete "+t.departmanName+". Are you sure?")&&this._dataService.delete(t.departmanId,this._deleteUrl).subscribe(function(e){a.loading=!1,a.resmessage=e,a.getAll()},function(e){})},e.prototype.sort=function(a){this.departmans.sort(function(e,t){return e[a]>t[a]?1:e[a]<t[a]?-1:0})},e.prototype.sortFunction=function(a,e){1==e?this.departmans.sort(function(e,t){return e[a]<t[a]?1:e[a]>t[a]?-1:0}):this.departmans.sort(function(e,t){return e[a]>t[a]?1:e[a]<t[a]?-1:0}),this.booleanValue=!this.booleanValue},e.prototype.reset=function(){this.departmanForm.setValue({departmanId:0,departmanName:null}),this.resmessage=null,$("#departmanName").focus()},__decorate([core_1.Component({selector:"ng-departmans",templateUrl:"./app/backoffice/system/departmans/component.html",providers:[service_1.DataService]}),__metadata("design:paramtypes",[router_1.Router,platform_browser_1.Title,forms_1.FormBuilder,service_1.DataService])],e)}();exports.DepartmansComponent=DepartmansComponent;
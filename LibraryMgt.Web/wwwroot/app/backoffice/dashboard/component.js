"use strict";var __decorate=this&&this.__decorate||function(t,e,a,r){var o,i=arguments.length,n=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,r);else for(var s=t.length-1;0<=s;s--)(o=t[s])&&(n=(i<3?o(n):3<i?o(e,a,n):o(e,a))||n);return 3<i&&n&&Object.defineProperty(e,a,n),n},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),router_1=require("@angular/router"),platform_browser_1=require("@angular/platform-browser"),angular_highcharts_1=require("angular-highcharts"),service_1=require("../../shared/service"),DashboardComponent=function(){function t(t,e,a){this.router=t,this.titleService=e,this._dataService=a,this.totalEquipment=0,this.totalMember=0,this.totalIssued=0,this.totalReturned=0,this._getEUrl="/api/report/getequipmentchart",this._getMUrl="/api/report/getmemberchart",this._getSUrl="/api/dashboard/getallsummary"}return t.prototype.ngOnInit=function(){this.titleService.setTitle("Envanter Takip Sistemi | Dashboard"),this.getSummary(),this.getEquipmentChart(),this.getMemberChart()},t.prototype.loadScripts=function(){for(var t=["assets/js/index.js"],e=0;e<t.length;e++){var a=document.createElement("script");a.src=t[e],a.type="text/javascript",a.async=!1,a.charset="utf-8",document.getElementsByTagName("body")[0].appendChild(a)}},t.prototype.getSummary=function(){var e=this;this._dataService.getall(this._getSUrl).subscribe(function(t){e.summaryTotal=t,e.totalEquipment=e.summaryTotal.totalEquipment,e.totalMember=e.summaryTotal.totalMember,e.totalIssued=e.summaryTotal.totalIssued,e.totalReturned=e.summaryTotal.totalReturned},function(t){})},t.prototype.getEquipmentChart=function(){var r=this;this._dataService.getall(this._getEUrl).subscribe(function(t){r.echart=t;for(var e=[],a=0;a<r.echart.length;a++)e.push({name:r.echart[a].ename,y:r.echart[a].nissue,sliced:!0,selected:!0});r.eqchart=new angular_highcharts_1.Chart({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",backgroundColor:null,options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Equipment Issued"},subtitle:{text:"Issued Pie-Chart!"},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{name:"Total Issued",data:e}]})},function(t){})},t.prototype.getMemberChart=function(){var r=this;this._dataService.getall(this._getMUrl).subscribe(function(t){r.mchart=t;for(var e=[],a=0;a<r.mchart.length;a++)e.push({name:r.mchart[a].mname,y:r.mchart[a].ntrans,sliced:!0,selected:!0});r.mkchart=new angular_highcharts_1.Chart({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",backgroundColor:null,options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Member "},subtitle:{text:"Pie-Chart!"},tooltip:{pointFormat:"{series.name}: <b>{point.y}</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:35,dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{name:"Ödünç Sayısı",data:e}]})},function(t){})},__decorate([core_1.Component({selector:"ng-dashboard",templateUrl:"./app/backoffice/dashboard/component.html",providers:[service_1.DataService]}),__metadata("design:paramtypes",[router_1.Router,platform_browser_1.Title,service_1.DataService])],t)}();exports.DashboardComponent=DashboardComponent;